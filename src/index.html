<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sleep Outside | Tents</title>
  <link rel="stylesheet" href="../css/style.css" />
</head>
<body>
  <header class="divider">
    <div class="logo">
      <img src="images/noun_Tent_2517.svg" alt="tent image for logo" />
      <a href="index.html"> Sleep<span class="highlight">Outside</span></a>
    </div>
    <div class="cart">
      <a href="cart/index.html">
        <!-- Your SVG icon here -->
        <span>My Cart</span>
        <sup id="cart-count" style="display:none;">0</sup>
      </a>
    </div>
  </header>

  <main class="divider">
    <section class="product-list">
      <h2>Our Tents</h2>
      <div id="products"></div>
    </section>
  </main>

  <footer>
    &copy;2025 ⛺ SleepOutside ⛺ WDD 330 ⛺ BYU-Idaho for BYU-Pathway Worldwide Online
  </footer>

  <script type="module">
    import ProductData from './js/ProductData.mjs';
    

    const dataSource = new ProductData("tents");

    async function showProducts() {
      const data = await dataSource.getData();
      // FIX: Support both array and object with Result property
      const products = Array.isArray(data) ? data : data.Result || [];
      const container = document.getElementById('products');
      if (!products.length) {
        container.innerHTML = "<p>No tents found.</p>";
        return;
      }
      container.innerHTML = products.map(product => `
        <div class="product-card">
          <a href="product-detail.html?id=${product.Id}">
            <img src="${product.Image || (product.Images && product.Images.PrimaryMedium) || ''}" alt="${product.Name}" style="max-width:150px;">
            <h3>${product.Name}</h3>
            <p class="price">$${product.FinalPrice}</p>
          </a>
        </div>
      `).join('');
    }

    showProducts();
  </script>
</body>
</html>